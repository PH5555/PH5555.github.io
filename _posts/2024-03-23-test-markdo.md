---
layout: post
title: Spring - 스프링 트랜잭션
tags: [Spring, 데이터 접근 핵심 원리]
comments: true
---

## 문제점들?

이전에 트랜잭션을 직접 구현했을 때 여러가지 문제점이 있었다.

- 서비스 계층에는 비지니스 로직만이 존재해야 유지보수하기가 펀한데, 트랜잭션과 관련된 코드가 많다. 현재의 트랜잭션 코드는 JDBC와 관련되어있기 때문에 유지보수 하기가 까다로워진다.
- 트랜잭션 코드는 try 부분에 commit, catch 부분에 rollback 을 하는 패턴이 반복된다.

이런 문제점들을 스프링에서 제공하는 기능을 통해 해결할 것이다.

## 트랜잭션 추상화

현재 트랜잭션은 JDBC에서 제공하는 기술로 짜여져있다. 이 코드를 JPA 기술로 바꾸고자 하면 모든 코드를 수정해야 할 것이다. 

![abs](/assets/img/tranaction_abs.PNG)

서비스는 특정 트랜잭션 기술에 직접 접근하지 않고 `TxManager`라는 추상화된 인터페이스에 접근한다. DI를 통해 원하는 구현체를 넣어주면된다.

> 스프링은 이런 트랜잭션 추상화 기술을 구현해두었다. 스프링에서 구현하는 `PlatformTranactionManager`를 사용하면 된다.

## 트랜잭션 동기화
